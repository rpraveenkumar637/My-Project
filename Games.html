<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Your Games</title>
  <style>
    :root {
      --bg: #fff;
      --fg: #004aad;
      --card-bg: #f0f4ff;
    }
    [data-theme="dark"] {
      --bg: #121212;
      --fg: #66aaff;
      --card-bg: #1e1e1e;
    }
    body {
      margin: 0; padding: 0;
      background: var(--bg);
      color: var(--fg);
      font-family: Arial, sans-serif;
      transition: background 0.3s, color 0.3s;
    }
    header {
      display: flex; justify-content: space-between; align-items: center;
      padding: 1rem; background: var(--card-bg);
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    h1 { margin: 0; }
    .toggle-btn {
      background: none; border: 2px solid var(--fg);
      padding: 0.5rem 1rem;
      color: var(--fg); cursor: pointer;
      border-radius: 4px;
    }
    main { 
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1rem;
      padding: 1rem;
    }
    .game-card {
      background: var(--card-bg);
      border-radius: 8px; padding: 1rem;
      display: flex; flex-direction: column;
      align-items: center; box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    canvas, .memory-board, .quiz-card {
      margin: 0.5rem 0; max-width: 100%;
    }
    button { margin: 0.5rem; }
    /* Basic button and input styling */
    .quiz-card input[type="radio"] { margin-right: 0.5rem; }
  </style>
</head>
<body>
  <header>
    <h1>Games Lounge</h1>
    <button class="toggle-btn" id="themeToggle">Toggle Dark Mode</button>
  </header>
  <main>
    <!-- Snake Game Card -->
    <div class="game-card" id="snakeCard">
      <h2>Snake</h2>
      <canvas id="snakeCanvas" width="300" height="300"></canvas>
      <button onclick="startSnake()">Start / Restart</button>
      <p>Score: <span id="snakeScore">0</span></p>
    </div>

    <!-- Memory Match Card -->
    <div class="game-card" id="memoryCard">
      <h2>Memory Match</h2>
      <div class="memory-board" id="memoryBoard"></div>
      <button onclick="initMemory()">Restart</button>
      <p>Attempts: <span id="memoryAttempts">0</span></p>
    </div>

    <!-- Quiz Game Card -->
    <div class="game-card" id="quizCard">
      <h2>Quick Quiz</h2>
      <div class="quiz-card" id="quizContainer"></div>
      <button onclick="loadQuiz()">Next</button>
      <p>Correct: <span id="quizScore">0</span></p>
    </div>

    <!-- Space Dodger Card -->
    <div class="game-card" id="spaceCard">
      <h2>Space Dodger</h2>
      <canvas id="spaceCanvas" width="300" height="300"></canvas>
      <button onclick="startDodger()">Play / Restart</button>
      <p>Score: <span id="dodgerScore">0</span></p>
    </div>
  </main>

  <script>
    // Dark mode
    const toggle = document.getElementById('themeToggle');
    toggle.onclick = () => {
      document.documentElement.dataset.theme =
        document.documentElement.dataset.theme === 'dark' ? '' : 'dark';
    };

    // ----- Snake Game -----
    const sCanvas = document.getElementById('snakeCanvas');
    const sCtx = sCanvas.getContext('2d');
    let snake, dir, food, snakeInterval;
    function startSnake() {
      clearInterval(snakeInterval);
      snake = [{ x: 10, y: 10 }];
      dir = { x: 1, y: 0 };
      food = { x: 5, y: 5 };
      document.getElementById('snakeScore').innerText = 0;
      snakeInterval = setInterval(updateSnake, 100);
    }
    function updateSnake() {
      const head = { x: snake[0].x + dir.x, y: snake[0].y + dir.y };
      if (head.x < 0 || head.y < 0 || head.x > 19 || head.y > 19 ||
          snake.some(p => p.x === head.x && p.y === head.y)) {
        return clearInterval(snakeInterval);
      }
      snake.unshift(head);
      if (head.x === food.x && head.y === food.y) {
        food = { x: Math.floor(Math.random()*20), y: Math.floor(Math.random()*20) };
        document.getElementById('snakeScore').innerText = snake.length - 1;
      } else {
        snake.pop();
      }
      drawSnake();
    }
    function drawSnake() {
      sCtx.fillStyle = '#f0f4ff';
      sCtx.fillRect(0,0,300,300);
      sCtx.fillStyle = '#004aad';
      snake.forEach(p => sCtx.fillRect(p.x*15, p.y*15, 14, 14));
      sCtx.fillStyle = '#ff5722';
      sCtx.fillRect(food.x*15, food.y*15, 14, 14);
    }
    window.addEventListener('keydown', e => {
      if (e.key === 'ArrowUp' && dir.y===0) dir={x:0,y:-1};
      if (e.key === 'ArrowDown' && dir.y===0) dir={x:0,y:1};
      if (e.key === 'ArrowLeft' && dir.x===0) dir={x:-1,y:0};
      if (e.key === 'ArrowRight'&& dir.x===0) dir={x:1,y:0};
    });

    // ----- Memory Match -----
    const memes = ['🛰️','🚀','🛸','🪐','🌠','🌌'];
    let memArr, flips, attempts;
    function initMemory() {
      flips = [];
      attempts = 0;
      document.getElementById('memoryAttempts').innerText = attempts;
      memArr = [...memes, ...memes].sort(() => 0.5 - Math.random());
      const board = document.getElementById('memoryBoard');
      board.innerHTML = '';
      memArr.forEach((icon,i) => {
        const card = document.createElement('div');
        card.textContent = '?';
        card.style.cssText = 'width:50px;height:50px;border:1px solid #004aad;display:inline-flex;align-items:center;justify-content:center;font-size:24px;cursor:pointer;margin:4px;background:var(--bg);';
        card.onclick = () => flipCard(card, icon, i);
        board.appendChild(card);
      });
    }
    function flipCard(card, icon, idx) {
      if (flips.length===2 || card.textContent!== '?') return;
      card.textContent = icon; flips.push({card,icon});
      if (flips.length===2) {
        attempts++;
        document.getElementById('memoryAttempts').innerText = attempts;
        if (flips[0].icon !== flips[1].icon) {
          setTimeout(()=> flips.forEach(o=>o.card.textContent='?'), 800);
        }
        flips = [];
      }
    }
    initMemory();

    // ----- Quiz Game -----
    const quizData = [
      {q:'What is 2+2?', opts:['3','4','5'], a:1},
      {q:'HTML stands for?', opts:['Hyper Text','High Text','Hot Mail'], a:0},
      {q:'JS filename ext?', opts:['.js','.jsx','.json'], a:0},
    ];
    let qIdx=0, scoreQ=0;
    function loadQuiz() {
      if (qIdx>=quizData.length) {
        alert(`Quiz Over! Score: ${scoreQ}`);
        qIdx = 0; scoreQ = 0;
      }
      const cur = quizData[qIdx++];
      const cont = document.getElementById('quizContainer');
      cont.innerHTML = `<p>${cur.q}</p>` +
        cur.opts.map((o,i) =>
          `<label><input name="opt" type="radio" value="${i}"/>${o}</label><br>`
        ).join('');
      const btn = cont.nextElementSibling;
      btn.onclick = () => {
        const sel = cont.querySelector('input:checked');
        if (sel && +sel.value===cur.a) {
          scoreQ++; document.getElementById('quizScore').innerText = scoreQ;
        }
        loadQuiz();
      };
    }
    loadQuiz();

    // ----- Space Dodger -----
    const dCanvas = document.getElementById('spaceCanvas');
    const dCtx = dCanvas.getContext('2d');
    let dodger, asteroids, dodgerInt;
    function startDodger() {
      clearInterval(dodgerInt);
      dodger = { x:140, y:260, w:20, h:20 };
      asteroids = [];
      document.getElementById('dodgerScore').innerText = 0;
      dodgerInt = setInterval(updateDodger, 50);
    }
    function updateDodger() {
      dCtx.fillStyle = varGet('--card-bg');
      dCtx.fillRect(0,0,300,300);
      // spawn asteroid
      if (Math.random()<0.03) asteroids.push({x:Math.random()*280,y:0,size:10+Math.random()*20});
      // move & draw asteroids
      dCtx.fillStyle = '#ff5722';
      asteroids.forEach((a,i)=>{
        a.y += 3; dCtx.beginPath();
        dCtx.arc(a.x,a.y,a.size,0,2*Math.PI); dCtx.fill();
        if (a.y>300) {
          asteroids.splice(i,1);
          const sc = +document.getElementById('dodgerScore').innerText;
          document.getElementById('dodgerScore').innerText = sc+1;
        }
        if (a.x > dodger.x && a.x < dodger.x+dodger.w &&
            a.y > dodger.y && a.y < dodger.y+dodger.h) {
          clearInterval(dodgerInt);
        }
      });
      // draw ship
      dCtx.fillStyle = '#004aad';
      dCtx.fillRect(dodger.x,dodger.y,dodger.w,dodger.h);
    }
    window.addEventListener('keydown', e => {
      if (!dodger) return;
      if (e.key==='ArrowLeft' && dodger.x>0) dodger.x -= 10;
      if (e.key==='ArrowRight'&& dodger.x<280) dodger.x += 10;
    });
    function varGet(name) {
      return getComputedStyle(document.documentElement).getPropertyValue(name);
    }
  </script>
</body>
</html>
